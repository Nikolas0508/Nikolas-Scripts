<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Nikolas Scripts | Control Panel</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;800&display=swap" rel="stylesheet">

<style>
:root{
    --bg:#050b08;
    --card:#0d1f17;
    --neon:#00ff88;
}

*{margin:0;padding:0;box-sizing:border-box;font-family:'Poppins',sans-serif;}

body{background:var(--bg);color:white;overflow-x:hidden;}

@keyframes rgbBorder{
0%{box-shadow:0 0 10px #00ff88;}
25%{box-shadow:0 0 15px #00ffcc;}
50%{box-shadow:0 0 15px #00ffaa;}
75%{box-shadow:0 0 15px #00ff66;}
100%{box-shadow:0 0 10px #00ff88;}
}

/* LOGIN */
.login{
display:flex;height:100vh;justify-content:center;align-items:center;
}
.login-box{
background:rgba(13,31,23,0.6);
backdrop-filter:blur(20px);
padding:40px;border-radius:20px;width:400px;
animation:rgbBorder 3s infinite alternate;
}
.login-box h2{
margin-bottom:20px;text-align:center;color:var(--neon);
}
input,textarea{
width:100%;padding:12px;margin:10px 0;
background:#0a1712;border:1px solid #00ff88;
border-radius:8px;color:white;
}
button{
width:100%;padding:12px;background:var(--neon);
border:none;border-radius:8px;font-weight:600;
cursor:pointer;transition:.3s;margin-top:5px;
}
button:hover{
transform:scale(1.05);
box-shadow:0 0 20px #00ff88;
}

/* APP */
.app{display:none;}

.sidebar{
position:fixed;width:250px;height:100vh;
background:#07120d;padding:30px;
border-right:1px solid #00ff88;
}
.logo{
font-size:22px;font-weight:800;color:var(--neon);
margin-bottom:40px;
}
.sidebar a{
display:block;margin:15px 0;padding:10px;
border-radius:8px;cursor:pointer;transition:.3s;
}
.sidebar a:hover{
background:#00ff8820;
box-shadow:0 0 15px #00ff88;
}

.content{
margin-left:270px;padding:50px;
animation:fade 0.6s ease;
}
@keyframes fade{
from{opacity:0;transform:translateY(10px);}
to{opacity:1;transform:translateY(0);}
}

.title{font-size:32px;font-weight:800;margin-bottom:10px;}
.card{
background:rgba(13,31,23,0.6);
backdrop-filter:blur(15px);
padding:25px;border-radius:20px;margin-bottom:25px;
transition:.3s;
}
.card:hover{
transform:translateY(-5px);
animation:rgbBorder 2s infinite alternate;
}

.badge{color:#00ff88;font-weight:600;}
.hidden{display:none;}
</style>
</head>
<body>

<!-- LOGIN -->
<div class="login" id="loginPage">
<div class="login-box">
<h2>Nikolas Scripts</h2>
<input id="username" placeholder="UsuÃ¡rio">
<input id="password" type="password" placeholder="Senha">
<button onclick="login()">Entrar</button>
<p id="msg"></p>
</div>
</div>

<!-- APP -->
<div class="app" id="app">

<div class="sidebar">
<div class="logo">Nikolas Scripts</div>
<a onclick="show('inicio')">ğŸ  InÃ­cio</a>
<a onclick="show('scripts')">ğŸ“œ Scripts</a>
<a onclick="show('tutorial')">ğŸ“˜ Tutorial</a>
<a id="adminBtn" class="hidden" onclick="show('admin')">ğŸ›  Admin</a>
</div>

<div class="content">

<!-- INÃCIO -->
<div id="inicio">
<div class="title">Bem-vindo, <span class="badge" id="userDisplay"></span></div>

<div class="card">ğŸ’» Sistema profissional de scripts</div>
<div class="card">ğŸ“œ Copie scripts facilmente</div>
<div class="card">ğŸ”’ Somente admin pode gerenciar usuÃ¡rios e scripts</div>
<div class="card">ğŸŒ Scripts e usuÃ¡rios online para todos</div>
<div class="card">âš¡ Funcionalidades rÃ¡pidas e intuitivas</div>
<div class="card">ğŸ“˜ Tutoriais passo a passo</div>
</div>

<!-- SCRIPTS -->
<div id="scripts" class="hidden">
<div class="title">Scripts DisponÃ­veis</div>
<div id="scriptList"></div>

<div id="addScriptBox" class="hidden">
<div class="card">
<h3>Adicionar Script</h3>
<input id="scriptName" placeholder="Nome do Script">
<textarea id="scriptContent" placeholder="CÃ³digo do Script"></textarea>
<button onclick="addScript()">Salvar Script</button>
</div>
</div>
</div>

<!-- TUTORIAL -->
<div id="tutorial" class="hidden">
<div class="title">Tutorial Detalhado</div>

<div class="card">
<h3>ğŸ’» Tutorial PC</h3>
<p>1ï¸âƒ£ Crie um favorito no navegador â†’ nomeie como quiser</p>
<p>2ï¸âƒ£ Edite o favorito e cole <b>javascript:</b> seguido do script</p>
<p>3ï¸âƒ£ Salve o favorito</p>
<p>4ï¸âƒ£ Abra qualquer site e clique no favorito â†’ o script serÃ¡ executado</p>
<p>5ï¸âƒ£ Para adicionar novos scripts no painel â†’ use a aba â€œScriptsâ€ (somente admin)</p>
<p>6ï¸âƒ£ Para compartilhar scripts â†’ copie e envie o conteÃºdo</p>
</div>

<div class="card">
<h3>ğŸ“± Tutorial Celular</h3>
<p>1ï¸âƒ£ Abra o navegador â†’ adicione aos favoritos</p>
<p>2ï¸âƒ£ Edite o favorito e cole o script completo</p>
<p>3ï¸âƒ£ Salve o favorito</p>
<p>4ï¸âƒ£ Clique no favorito para executar o script em qualquer pÃ¡gina</p>
<p>5ï¸âƒ£ Para adicionar novos scripts no painel â†’ use a aba â€œScriptsâ€ (somente admin)</p>
<p>6ï¸âƒ£ Para compartilhar scripts â†’ copie e envie o conteÃºdo</p>
</div>

<!-- ADMIN -->
<div id="admin" class="hidden">
<div class="title">Painel Administrativo</div>

<div class="card">
<h3>UsuÃ¡rios Cadastrados</h3>
<div id="usersContainer"></div>
</div>

<div class="card">
<h3>Adicionar Novo UsuÃ¡rio</h3>
<input id="newUser" placeholder="Novo usuÃ¡rio">
<input id="newPass" placeholder="Senha" type="password">
<button onclick="addUser()">Criar UsuÃ¡rio</button>
</div>
</div>

</div>
</div>

<!-- ================= FIREBASE SCRIPT ================= -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getFirestore, collection, addDoc, getDocs, deleteDoc, doc } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "SUA_API_KEY",
  authDomain: "SEU_AUTH_DOMAIN",
  projectId: "SEU_PROJECT_ID",
  storageBucket: "SEU_STORAGE_BUCKET",
  messagingSenderId: "SEU_MESSAGING_ID",
  appId: "SEU_APP_ID"
};

const appFirebase = initializeApp(firebaseConfig);
const db = getFirestore(appFirebase);

let currentUser = null;
let isAdmin = false;

// REFERÃŠNCIAS DO DOM
const loginPage = document.getElementById("loginPage");
const app = document.getElementById("app");
const userDisplay = document.getElementById("userDisplay");
const adminBtn = document.getElementById("adminBtn");
const addScriptBox = document.getElementById("addScriptBox");
const usersContainer = document.getElementById("usersContainer");
const scriptList = document.getElementById("scriptList");

async function login() {
  const u = username.value;
  const p = password.value;

  if(u === "NikolasP" && p === "2011"){
    start(u, true);
    return;
  }

  const usersSnap = await getDocs(collection(db,"users"));
  let found = false;
  usersSnap.forEach(docSnap => {
    const data = docSnap.data();
    if(data.username === u && data.password === p) found = true;
  });

  if(!found){msg.innerText="UsuÃ¡rio invÃ¡lido"; return;}
  start(u, false);
}

function start(u, admin=false){
  currentUser = u;
  isAdmin = admin;

  loginPage.style.display = "none";
  app.style.display = "block";
  userDisplay.innerText = currentUser;

  if(isAdmin){
    adminBtn.classList.remove("hidden");
    addScriptBox.classList.remove("hidden");
    loadUsers();
  } else {
    adminBtn.classList.add("hidden");
    addScriptBox.classList.add("hidden");
  }

  loadScripts();
}

window.show=function(id){
  ["inicio","scripts","tutorial","admin"].forEach(x => document.getElementById(x).classList.add("hidden"));
  document.getElementById(id).classList.remove("hidden");

  if(id==="admin" && isAdmin){
    loadUsers();
  }
}

/* ===== SCRIPTS ===== */
async function loadScripts(){
  scriptList.innerHTML = "";
  const snap = await getDocs(collection(db,"scripts"));
  snap.forEach(docSnap=>{
    const data = docSnap.data();
    const div = document.createElement("div");
    div.className = "card";
    div.innerHTML = `
      <h3>${data.name}</h3>
      <button onclick="copyScript('${docSnap.id}')">Copiar</button>
      ${isAdmin ? `<button onclick="deleteScript('${docSnap.id}')">Excluir</button>` : ''}
    `;
    scriptList.appendChild(div);
  });
}

window.copyScript = async function(id){
  const snap = await getDocs(collection(db,"scripts"));
  let text="";
  snap.forEach(doc=>{
    if(doc.id===id) text = doc.data().content;
  });
  navigator.clipboard.writeText(text);
  alert("Copiado!");
}

window.addScript = async function(){
  if(!isAdmin){alert("Somente admin"); return;}
  const name = scriptName.value;
  const content = scriptContent.value;
  await addDoc(collection(db,"scripts"),{name,content});
  loadScripts();
}

window.deleteScript = async function(id){
  if(!isAdmin){alert("Somente admin"); return;}
  await deleteDoc(doc(db,"scripts",id));
  loadScripts();
}

/* ===== ADMIN ===== */
async function loadUsers(){
  usersContainer.innerHTML = "";
  const snap = await getDocs(collection(db,"users"));
  snap.forEach(docSnap=>{
    const data = docSnap.data();
    const div = document.createElement("div");
    div.className = "card";
    div.innerHTML = `
      <b>${data.username}</b>
      <button onclick="deleteUser('${docSnap.id}')">Remover</button>
      <br><br>
    `;
    usersContainer.appendChild(div);
  });
}

window.addUser = async function(){
  if(!isAdmin){alert("Somente admin"); return;}
  const u = newUser.value;
  const p = newPass.value;
  if(!u||!p){alert("Preencha tudo"); return;}
  await addDoc(collection(db,"users"),{username:u,password:p});
  newUser.value = "";
  newPass.value = "";
  loadUsers();
}

window.deleteUser = async function(id){
  if(!isAdmin){alert("Somente admin"); return;}
  await deleteDoc(doc(db,"users",id));
  loadUsers();
}
</script>

</body>
</html>
