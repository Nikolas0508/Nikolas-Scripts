<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Nikolas Scripts</title>

<style>
body{
    margin:0;
    font-family:Arial, Helvetica, sans-serif;
    background:#071a0f;
    color:#00ff88;
}
.sidebar{
    width:230px;
    height:100vh;
    background:#02150c;
    position:fixed;
    padding:20px;
}
.sidebar h2{
    margin-bottom:30px;
}
.sidebar a{
    display:block;
    margin:15px 0;
    text-decoration:none;
    color:#00ff88;
    cursor:pointer;
}
.content{
    margin-left:250px;
    padding:40px;
}
.card{
    background:#0d2d1b;
    padding:20px;
    border-radius:10px;
    margin-bottom:20px;
}
button{
    background:#00ff88;
    border:none;
    padding:8px 12px;
    cursor:pointer;
    margin:5px 0;
}
input, textarea{
    width:100%;
    padding:8px;
    margin:5px 0;
    background:#02150c;
    border:1px solid #00ff88;
    color:#00ff88;
}
.hidden{
    display:none;
}
.title{
    font-size:28px;
    margin-bottom:20px;
}
.top-user{
    color:#00ff88;
    font-weight:bold;
}
.maintenance{
    color:red;
    font-weight:bold;
}
.login-box{
    max-width:400px;
    margin:100px auto;
    background:#0d2d1b;
    padding:30px;
    border-radius:10px;
}
</style>
</head>
<body>

<div id="loginPage">
    <div class="login-box">
        <h2>Login - Nikolas Scripts</h2>
        <input id="username" placeholder="Usu치rio">
        <input id="password" type="password" placeholder="Senha">
        <button onclick="login()">Entrar</button>
        <button onclick="requestAccess()">Solicitar Acesso</button>
        <p id="loginMsg"></p>
    </div>
</div>

<div id="app" class="hidden">

<div class="sidebar">
    <h2> Nikolas Scripts </h2>
    <a onclick="showTab('inicio')">In칤cio</a>
    <a onclick="showTab('scripts')">Scripts</a>
    <a onclick="showTab('tutorial')">Tutorial</a>
    <a id="adminMenu" class="hidden" onclick="showTab('admin')">Admin</a>
</div>

<div class="content">

<div id="inicio" class="tab">
    <div class="title">Bem Vindo aos Scripts do <span class="top-user" id="displayUser"></span></div>

    <div class="card">
        <h3>Scripts</h3>
        Acesse e copie scripts dispon칤veis.
    </div>

    <div class="card hidden" id="adminInicioCard">
        <h3>Painel Admin</h3>
        Gerencie acessos e scripts.
    </div>
</div>

<div id="scripts" class="tab hidden">
    <h2>Scripts</h2>
    <div id="scriptsList"></div>

    <div id="addScriptArea" class="hidden">
        <h3>Adicionar Script</h3>
        <input id="scriptName" placeholder="Nome do Script">
        <textarea id="scriptContent" placeholder="C칩digo do Script"></textarea>
        <button onclick="addScript()">Adicionar</button>
    </div>
</div>

<div id="tutorial" class="tab hidden">
    <h2>Tutorial Bookmarklet</h2>

    <div class="card">
        <h3>游눹 Computador</h3>
        <ol>
            <li>Copie o script.</li>
            <li>Crie um favorito.</li>
            <li>Edite o favorito.</li>
            <li>Apague a URL.</li>
            <li>Cole o c칩digo come칞ando com <b>javascript:</b></li>
            <li>Salve.</li>
            <li>Clique no favorito para executar.</li>
        </ol>
    </div>

    <div class="card">
        <h3>游님 Celular</h3>
        <ol>
            <li>Crie um favorito qualquer.</li>
            <li>V치 na aba de favoritos.</li>
            <li>Edite ele.</li>
            <li>Apague o link.</li>
            <li>Cole o script come칞ando com <b>javascript:</b></li>
            <li>Salve.</li>
            <li>Toque nele para executar.</li>
        </ol>
    </div>
</div>

<div id="admin" class="tab hidden">
    <h2>Painel Admin</h2>

    <div class="card">
        <h3>Solicita칞칫es</h3>
        <div id="requestsList"></div>
    </div>

    <div class="card">
        <h3>Usu치rios</h3>
        <div id="usersList"></div>
    </div>
</div>

</div>
</div>

<script>

let currentUser = null;
let isAdmin = false;

function getUsers(){
    return JSON.parse(localStorage.getItem("users")) || [];
}

function saveUsers(users){
    localStorage.setItem("users", JSON.stringify(users));
}

function getScripts(){
    return JSON.parse(localStorage.getItem("scripts")) || [];
}

function saveScripts(scripts){
    localStorage.setItem("scripts", JSON.stringify(scripts));
}

function login(){
    let u = username.value;
    let p = password.value;

    if(u === "NikolasP" && p === "2011"){
        currentUser = u;
        isAdmin = true;
        startApp();
        return;
    }

    let users = getUsers();
    let user = users.find(x => x.username === u && x.password === p);

    if(!user){
        loginMsg.innerText = "Usu치rio n칚o encontrado.";
        return;
    }

    if(!user.approved){
        loginMsg.innerText = "Aguardando aprova칞칚o do admin.";
        return;
    }

    currentUser = u;
    startApp();
}

function requestAccess(){
    let u = username.value;
    let p = password.value;

    if(!u || !p){
        loginMsg.innerText = "Preencha usu치rio e senha.";
        return;
    }

    let users = getUsers();

    if(users.find(x=>x.username===u)){
        loginMsg.innerText = "Usu치rio j치 existe.";
        return;
    }

    users.push({username:u,password:p,approved:false});
    saveUsers(users);
    loginMsg.innerText = "Solicita칞칚o enviada.";
}

function startApp(){
    loginPage.classList.add("hidden");
    app.classList.remove("hidden");
    displayUser.innerText = currentUser;

    if(isAdmin){
        adminMenu.classList.remove("hidden");
        adminInicioCard.classList.remove("hidden");
        addScriptArea.classList.remove("hidden");
    }

    loadScripts();
    loadAdmin();
}

function showTab(id){
    document.querySelectorAll(".tab").forEach(t=>t.classList.add("hidden"));
    document.getElementById(id).classList.remove("hidden");
}

function loadScripts(){
    let scripts = getScripts();
    scriptsList.innerHTML = "";

    scripts.forEach((s,i)=>{
        let div = document.createElement("div");
        div.className="card";
        div.innerHTML = `
            <h3>${s.name}</h3>
            ${s.maintenance ? '<p class="maintenance">Em manuten칞칚o</p>' : ''}
            <button ${s.maintenance?'disabled':''} onclick="copyScript(${i})">Copiar</button>
            ${isAdmin?`
                <button onclick="toggleMaintenance(${i})">Manuten칞칚o</button>
                <button onclick="deleteScript(${i})">Excluir</button>
            `:''}
        `;
        scriptsList.appendChild(div);
    });
}

function copyScript(i){
    let scripts = getScripts();
    navigator.clipboard.writeText(scripts[i].content);
    alert("Copiado!");
}

function addScript(){
    let scripts = getScripts();
    scripts.push({
        name:scriptName.value,
        content:scriptContent.value,
        maintenance:false
    });
    saveScripts(scripts);
    loadScripts();
}

function toggleMaintenance(i){
    let scripts = getScripts();
    scripts[i].maintenance = !scripts[i].maintenance;
    saveScripts(scripts);
    loadScripts();
}

function deleteScript(i){
    let scripts = getScripts();
    scripts.splice(i,1);
    saveScripts(scripts);
    loadScripts();
}

function loadAdmin(){
    if(!isAdmin) return;

    let users = getUsers();

    requestsList.innerHTML="";
    users.filter(u=>!u.approved).forEach((u,i)=>{
        let div=document.createElement("div");
        div.innerHTML=`
            ${u.username}
            <button onclick="approve(${i})">Aceitar</button>
            <button onclick="removeUser(${i})">Recusar</button>
        `;
        requestsList.appendChild(div);
    });

    usersList.innerHTML="";
    users.filter(u=>u.approved).forEach((u,i)=>{
        let div=document.createElement("div");
        div.innerHTML=`
            ${u.username}
            <button onclick="removeUser(${i})">Remover</button>
        `;
        usersList.appendChild(div);
    });
}

function approve(i){
    let users = getUsers();
    users[i].approved=true;
    saveUsers(users);
    loadAdmin();
}

function removeUser(i){
    let users=getUsers();
    users.splice(i,1);
    saveUsers(users);
    loadAdmin();
}

</script>
</body>
</html>

