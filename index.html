<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Nikolas Scripts</title>
<style>
body{
margin:0;
font-family:Arial;
background:#0f0f14;
color:white;
display:flex;
height:100vh;
}

.sidebar{
width:230px;
background:#151522;
padding:20px;
display:flex;
flex-direction:column;
}

.sidebar h2{
color:#a855f7;
}

.sidebar button{
background:none;
border:none;
color:#aaa;
text-align:left;
padding:10px 0;
cursor:pointer;
font-size:15px;
}

.sidebar button:hover{
color:white;
}

.main{
flex:1;
padding:40px;
overflow:auto;
}

.card{
background:#1a1a2e;
padding:20px;
border-radius:10px;
margin-bottom:20px;
}

input, textarea{
width:100%;
padding:10px;
margin:10px 0;
background:#111;
color:white;
border:1px solid #333;
border-radius:5px;
}

textarea{
height:100px;
}

.action-btn{
background:#7c3aed;
border:none;
padding:8px 15px;
color:white;
cursor:pointer;
border-radius:5px;
margin-right:5px;
}

.red{background:#dc2626;}
.green{background:#16a34a;}
.yellow{background:#eab308;}
.hidden{display:none;}
.center{
display:flex;
justify-content:center;
align-items:center;
width:100%;
}
.login-box{
background:#1a1a2e;
padding:30px;
border-radius:10px;
width:300px;
}
</style>
</head>
<body>

<div id="loginPage" class="center">
<div class="login-box">
<h2>Login</h2>
<input id="username" placeholder="Usu√°rio">
<input id="password" type="password" placeholder="Senha">
<button class="action-btn" onclick="login()">Entrar</button>
<p id="loginMsg"></p>
</div>
</div>

<div id="app" class="hidden">
<div class="sidebar">
<h2>Nikolas Scripts</h2>
<button onclick="showPage('home')">In√≠cio</button>
<button onclick="showPage('scripts')">Scripts</button>
<button onclick="showPage('tutorial')">Tutorial</button>
<button id="adminBtn" onclick="showPage('admin')">Admin</button>
<button onclick="logout()">Sair</button>
</div>

<div class="main">
<h1>Bem Vindo aos Scripts do <span id="displayUser"></span></h1>
<div id="content"></div>
</div>
</div>

<script>
let currentUser=null;

let users=JSON.parse(localStorage.getItem("users"))||[];
let scripts=JSON.parse(localStorage.getItem("scripts"))||[];

if(!users.find(u=>u.username==="NikolasP")){
users.push({username:"NikolasP",password:"2011",approved:true,isAdmin:true});
localStorage.setItem("users",JSON.stringify(users));
}

function save(){
localStorage.setItem("users",JSON.stringify(users));
localStorage.setItem("scripts",JSON.stringify(scripts));
}

function login(){
let u=username.value;
let p=password.value;

let user=users.find(x=>x.username===u);

if(user){
if(user.password!==p){loginMsg.innerText="Senha incorreta";return;}
if(!user.approved && !user.isAdmin){loginMsg.innerText="Aguardando aprova√ß√£o";return;}
currentUser=user;
start();
}else{
users.push({username:u,password:p,approved:false,isAdmin:false});
save();
loginMsg.innerText="Solicita√ß√£o enviada!";
}
}

function start(){
loginPage.classList.add("hidden");
app.classList.remove("hidden");
displayUser.innerText=currentUser.username;
adminBtn.style.display=currentUser.isAdmin?"block":"none";
showPage("home");
}

function logout(){
location.reload();
}

function showPage(page){
content.innerHTML="";
if(page==="home"){
content.innerHTML=`<div class="card">
<h2>Painel</h2>
<p>Acesse seus scripts ou tutorial.</p>
</div>`;
}

if(page==="scripts"){
scripts.forEach((s,i)=>{
content.innerHTML+=`
<div class="card">
<h3>${s.name}</h3>
${s.maintenance? "<p style='color:orange'>Em manuten√ß√£o</p>":
`<textarea readonly>${s.content}</textarea>
<button class="action-btn green" onclick="copyScript(${i})">Copiar</button>`}
</div>`;
});
}

if(page==="tutorial"){
content.innerHTML=`
<div class="card">
<h2>üíª Computador</h2>
<ol>
<li>Crie um favorito</li>
<li>Edite o favorito</li>
<li>Cole o script no campo URL</li>
<li>Salve e clique para executar</li>
</ol>
<h2>üì± Celular</h2>
<ol>
<li>Abra qualquer site</li>
<li>Crie favorito</li>
<li>Edite o favorito</li>
<li>Substitua a URL pelo script</li>
<li>Salve e clique</li>
</ol>
</div>`;
}

if(page==="admin" && currentUser.isAdmin){
content.innerHTML=`
<div class="card">
<h2>Adicionar Script</h2>
<input id="scriptName" placeholder="Nome do Script">
<textarea id="scriptContent" placeholder="C√≥digo do Script"></textarea>
<button class="action-btn green" onclick="addScript()">Adicionar</button>
</div>

<div class="card">
<h2>Gerenciar Scripts</h2>
${scripts.map((s,i)=>`
<div>
<b>${s.name}</b>
<button class="action-btn yellow" onclick="toggleMan(${i})">Manuten√ß√£o</button>
<button class="action-btn red" onclick="delScript(${i})">Excluir</button>
</div>
`).join("")}
</div>

<div class="card">
<h2>Solicita√ß√µes</h2>
${users.filter(u=>!u.approved&&!u.isAdmin).map((u,i)=>`
<div>
${u.username}
<button class="action-btn green" onclick="approve('${u.username}')">Aprovar</button>
<button class="action-btn red" onclick="removeUser('${u.username}')">Recusar</button>
</div>
`).join("")}
</div>

<div class="card">
<h2>Usu√°rios</h2>
${users.filter(u=>u.approved&&!u.isAdmin).map(u=>`
<div>
${u.username}
<button class="action-btn red" onclick="removeUser('${u.username}')">Remover</button>
</div>
`).join("")}
</div>
`;
}
}

function copyScript(i){
navigator.clipboard.writeText(scripts[i].content);
alert("Copiado!");
}

function addScript(){
scripts.push({name:scriptName.value,content:scriptContent.value,maintenance:false});
save();
showPage("admin");
}

function delScript(i){
scripts.splice(i,1);
save();
showPage("admin");
}

function toggleMan(i){
scripts[i].maintenance=!scripts[i].maintenance;
save();
showPage("admin");
}

function approve(name){
let u=users.find(x=>x.username===name);
u.approved=true;
save();
showPage("admin");
}

function removeUser(name){
users=users.filter(x=>x.username!==name);
save();
showPage("admin");
}
</script>

</body>
</html>
